<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<title>后台管理中心</title>
		<link rel="stylesheet" type="text/css" href="js/artdialog/ui-dialog.css" />
		<link rel="stylesheet" type="text/css" href="css/skin/icon/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/skin/default/style.css" />
		<script type="text/javascript" charset="utf-8" src="js/jquery/jquery-1.11.3.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery/jquery.nicescroll.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/artdialog/dialog-plus-min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/common.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery/knockout-3.4.2.js"></script>
		<script type="text/javascript">
			//页面加载完成时
			$(function() {
				//检测IE
				if('undefined' == typeof(document.body.style.maxHeight)) {
					window.location.href = 'ie6update.html';
				}
			});
		</script>
	</head>

	<body class="indexbody">
		<form id="mainform">
			<!--全局菜单-->
			<a class="btn-paograms" href="javascript:;" onclick="togglePopMenu();">
				<i class="iconfont icon-list-fill"></i>
			</a>
			<div id="pop-menu" class="pop-menu">
				<div class="pop-box" style="width: 610px;">
					<h1 class="title"><i class="iconfont icon-setting"></i>导航菜单</h1>
					<i class="close iconfont icon-remove" onclick="togglePopMenu();"></i>
					<div class="list-box" data-bind="foreach: { data: menuData, as: 'menus' }">
						<div class="list-group">
							<h1 data-bind="attr:{title: menus.abbreviation}"><i class="iconfont icon-plugin-full"></i></h1>
							<div class="list-wrap">
								<h2><label data-bind="text: menus.block"></label><i class="iconfont icon-arrow-down"></i></h2>
								<ul data-bind="foreach: { data: menus.groups, as: 'menuChilds' }">
									<li>
										<a data-bind="attr:{navid: menuChilds.menuflag}" target="mainframe">
											<span data-bind="text: menuChilds.groupName"></span>
										</a>
										<ul data-bind="foreach: { data: menuChilds.menus, as: 'mchild' }">
											<li>
												<a data-bind="attr:{navid: mchild.menuflag,href:mchild.url}" target="mainframe" target="mainframe">
													<span data-bind="text: mchild.menuName"></span>
												</a>
											</li>
										</ul>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!--/全局菜单-->

			<div class="main-top">
				<a class="icon-menu"><i class="iconfont icon-nav"></i></a>
				<div id="main-nav" class="main-nav">
					
				</div>
				<div class="nav-right">
					<div class="info">
						<h4><i class="iconfont icon-user"></i></h4>
						<span>您好，<label data-bind="text: userName"></label><br />
							<label data-bind="text: roleName"></label>
						</span>
					</div>
					<div class="option">
						<i class="iconfont icon-arrow-down"></i>
						<div class="drop-wrap">
							<ul class="item">
								<li>
									<a href="#" target="mainframe">个人中心</a>
								</li>
								<li>
									<a href="#" onclick="linkMenuTree(false, '');" target="mainframe">修改密码</a>
								</li>
								<li>
									<a id="lbtnExit" href="#" onclick="lbtnExit_Click">注销登录</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="main-left">
				<h1 class="logo"></h1>
				<div id="sidebar-nav" class="sidebar-nav" data-bind="foreach: { data: menuData, as: 'menus' }">
					<div class="list-group">
						<h1 data-bind="attr:{title: menus.abbreviation}"><i class="iconfont icon-plugin-full"></i></h1>
						<div class="list-wrap">
							<h2><label data-bind="text: menus.block"></label><i class="iconfont icon-arrow-down"></i></h2>
							<ul data-bind="foreach: { data: menus.groups, as: 'menuChilds' }">
								<li>
									<a data-bind="attr:{navid: menuChilds.menuflag}" target="mainframe">
										<span data-bind="text: menuChilds.groupName"></span>
									</a>
									<ul data-bind="foreach: { data: menuChilds.menus, as: 'mchild' }">
										<li>
											<a data-bind="attr:{navid: mchild.menuflag,href:mchild.url}" target="mainframe" target="mainframe">
												<span data-bind="text: mchild.menuName"></span>
											</a>
										</li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="main-container">
				<iframe id="mainframe" name="mainframe" frameborder="0" src="center.html"></iframe>
			</div>

		</form>
		<script type="text/javascript">
			var userData;
			var menuData;
			$(document).ready(function() {
				//   $.ajax({
				//          type: "post",
				//          url: "/safety/login",  //登陆接口
				//          data: {
				//              UserName: self.UserName,
				//              Password: self.Password
				//          },
				//          success: function (json) {
				//          	window.document.href="index.html";
				//          }
				//      })

				userData = {
					"id": 1,
					"userName": "思永涵",
					"avatar": "upload/user/0001.png",
					"roleName": "超级管理员"
				};
				
				menuData = [{
							"block": "基础信息",
							"abbreviation": "基础",
							"groups": [{
									"groupName": "考勤管理",
									"menuflag": "dept",
									"menus": [{
											"menuName": "门店考勤",
											"url": "attendance/list.html",
											"menuflag": "deptlist"
										},
										{
											"menuName": "新增考勤",
											"url": "attendance/add.html",
											"menuflag": "deptadd"
										}
									]
								},
								{
									"groupName": "部门管理",
									"menuflag": "dept",
									"menus": [{
											"menuName": "部门列表",
											"url": "dept/list.html",
											"menuflag": "deptlist"
										},
										{
											"menuName": "新增部门",
											"url": "dept/add.html",
											"menuflag": "deptadd"
										}
									]
								},
								{
									"groupName": "人员管理",
									"menuflag": "personnel",
									"menus": [{
											"menuName": "人员列表",
											"url": "personnel/list.html",
											"menuflag": "personnellist"
										},
										{
											"menuName": "新增人员",
											"url": "personnel/add.html",
											"menuflag": "personneladd"
										}
									]
								}
							]
						},
						{
							"block": "控制面板",
							"abbreviation": "控制面板",
							"groups": [{
								"groupName": "系统管理",
								"menuflag": "sys",
								"menus": [{
									"menuName": "系统设置",
									"url": "sys/seting.html",
									"menuflag": "sysseting"
								}]
							}]
						}
					]
			});
		</script>
		<!--列表数据绑定开始-->
		<script src="viewModel/userModel.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/layindex.js"></script>
		<!--列表数据绑定结束-->
	</body>

</html>